{"version":3,"sources":["components/InputForm.module.css","components/SuccessPanel.module.css","App.module.css","images/github.png","components/Boardgame.module.css","components/DigitInput.module.css","components/Introduction.js","components/AttemptResult.js","components/DigitInput.js","hooks/useDigits.js","components/InputForm.js","components/SuccessPanel.js","components/Boardgame.js","hooks/useSecretDigits.js","hooks/useAttempts.js","App.js","index.js"],"names":["module","exports","form","fieldset","button","error","digits","commands","app","github","attempts","digit","Introduction","react_default","a","createElement","Result","_ref","attempt","secretDigits","bulls","cows","i","length","indexOf","React","forwardRef","ref","label","value","onChange","onYieldFocus","_React$useState","useState","_React$useState2","Object","slicedToArray","lastKeyCode","setLastKeyCode","type","min","max","required","className","styles","aria-label","onClick","current","select","onKeyDown","ev","keyCode","parseInt","target","trim","substr","isNaN","initialState","Array","fill","useDigits","_useState","_useState2","setDigits","index","nextDigits","slice","dejaVu","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","err","return","hasDuplicates","valid","msg","some","v","InputForm","onSubmit","_useDigits","_useDigits2","setDigitAt","validation","resetDigits","refs","useRef","map","createRef","useEffect","focus","components_DigitInput","concat","key","direction","targetIndex","handleTransfertFocus","title","disabled","preventDefault","join","scrollIntoView","SuccessPanel","nbAttempts","onRestart","btnRef","Boardgame","content","_useSecretDigits","setSecretDigits","computeNextSecretDigits","nextSecretDigits","candidate","Math","floor","random","useDebugValue","useSecretDigits","_useSecretDigits2","_useAttempts","setAttempts","addAttempt","useCallback","resetAttempts","useAttempts","_useAttempts2","Fragment","hidden","currentYear","Date","getFullYear","ReactDOM","render","href","rel","src","width","height","alt","document","getElementById"],"mappings":"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","file":"static/js/main.2360f2c7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"InputForm_form__3xKER\",\"fieldset\":\"InputForm_fieldset__3N0tE\",\"button\":\"InputForm_button__ZXKEU\",\"error\":\"InputForm_error__1b30P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"digits\":\"SuccessPanel_digits__3EfzO\",\"commands\":\"SuccessPanel_commands__q1dsv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__EAF8O\",\"github\":\"App_github__tEpAD\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTE3OEEyQTk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTE3OEEyQjk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTI4OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTI5OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+m4QGuQAAAyRJREFUeNrEl21ojWEYx895TDPbMNlBK46IUiNmPvHBSUjaqc0H8pF5+aDUKPEBqU2NhRQpX5Rv5jWlDIWlMCv7MMSWsWwmb3tpXub4XXWdPHvc9/Gc41nu+nedc7/8r/99PffLdYdDPsvkwsgkTBwsA/PADJCnzX2gHTwBt8Hl7p537/3whn04XoDZDcpBlk+9P8AFcAghzRkJwPF4zGGw0Y9QS0mAM2AnQj77FqCzrtcwB1Hk81SYojHK4DyGuQ6mhIIrBWB9Xm7ug/6B/nZrBHBegrkFxoVGpnwBMSLR9EcEcC4qb8pP14BWcBcUgewMnF3T34VqhWMFkThLJAalwnENOAKiHpJq1FZgI2AT6HZtuxZwR9GidSHtI30jOrbawxlVX78/AbNfhHlomEUJJI89O2MqeE79T8/nk8nMBm/dK576hZgmA3cp/R4l9/UeSxiHLVIlNm4nFfT0bxyuIj7LHRTKai+zdJobwMKzcZSJb0ePV5PKN+BqAAKE47UlMnERELMM3EdYP/yrd+XYb2mOiYBiQ8OQnoRBlXrl9JZix7D1pHTazu4MoyBcnYamqAjIMTR8G4FT8LuhLsexXYYjICBiqhQBvYb6fLZIJCjPypVvaOoVAW2WcasCnL2Nq82xHJNSqlCeFcDshaPK0twkAhosjZL31QYw+1rlMpWGMArl23SBsZZO58F2tlJXmjOXS+s4WGvpMiBJT/I2PInZ6lIs9/hBsNS1hS6BG0DSqmYEDRlCXQrmy50P1oDRKTSegmNbUsA0zDMwRhPJXeCE3vWLPQMvan6X8AgIa1vcR4AkGZkDR4ejJ1UHpsaVI0g2LInpOsNFUud1rhxSV+fzC9Woz2EZkWQuja7/B+jUrgtIMpy9YCW4n4K41YfzRneW5E1KJTe4B2Zq1Q5EHEtj4U3AfEzR5SVY4l7QYQPJdN2as7RKBF0BPZqqH4VgMAMBL8Byxr7y8zCZiDlnOcEKIPmUpgB5Z2ww5RdOiiRiNajUmWda5IG6WbhsyY2fx6m8gLcoJDJFkH219M3We1+cnda93pfycZpIJEL/s/wSYADmOAwAQgdpBAAAAABJRU5ErkJggg==\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"attempts\":\"Boardgame_attempts__3KLyK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"digit\":\"DigitInput_digit__57qIz\"};","import React from 'react';\n\nexport default function Introduction() {\n  return (\n    <article>\n      <p>\n        Try to guess the <b>4-digit</b> secret number.\n      </p>\n      <p>\n        If the matching digits are in their right positions, they are \"bulls\"\n        (&#9733;), if in different positions, they are \"cows\" (&#9734;).\n      </p>\n    </article>\n  );\n}\n","import React from 'react';\n\nexport default function Result({ attempt, secretDigits }) {\n  let bulls = 0;\n  let cows = 0;\n\n  for (let i = 0; i < attempt.length; i++) {\n    if (attempt[i] === secretDigits[i]) {\n      bulls++;\n    } else {\n      if (secretDigits.indexOf(attempt[i]) !== -1) {\n        cows++;\n      }\n    }\n  }\n\n  return (\n    <span>\n      {bulls}&times;&#9733; {cows}&times;&#9734;\n    </span>\n  );\n}\n","import React from 'react';\n\nimport styles from './DigitInput.module.css';\n\nexport default React.forwardRef(function DigitInput({ label, value, onChange, onYieldFocus }, ref) {\n  const [lastKeyCode, setLastKeyCode] = React.useState(null);\n\n  function handleKeyDown(ev) {\n    // was already empty and hitting Backspace\n    if (value === '' && ev.keyCode === 8) {\n      onYieldFocus(-1);\n    }\n    setLastKeyCode(ev.keyCode);\n  }\n\n  function handleChange(ev) {\n    // input of type number is not always reliable, especially on mobile devices\n    const digit = parseInt(ev.target.value.trim().substr(0, 1), 10);\n    if (isNaN(digit)) {\n      onChange('');\n    } else {\n      onChange(digit);\n      // transfer focus if the value wasn't spinned using arrow keys (ArrowUp, ArrowDown)\n      if (lastKeyCode !== 38 && lastKeyCode !== 40) {\n        onYieldFocus(1);\n      }\n    }\n  }\n\n  return (\n    <input\n      ref={ref}\n      type=\"number\"\n      min=\"0\"\n      max=\"9\"\n      required\n      className={styles.digit}\n      aria-label={label}\n      value={value}\n      onClick={() => ref.current.select()}\n      onKeyDown={handleKeyDown}\n      onChange={handleChange}\n    />\n  );\n});\n","import { useState } from 'react';\n\nconst initialState = Array(4).fill('');\n\nfunction hasDuplicates(digits) {\n  const dejaVu = {};\n  for (const digit of digits) {\n    if (digit !== '') {\n      if (digit in dejaVu) {\n        return true;\n      } else {\n        dejaVu[digit] = true;\n      }\n    }\n  }\n  return false;\n}\n\nexport default function useDigits() {\n  const [digits, setDigits] = useState(initialState);\n\n  // TODO useCallback?\n  const setDigitAt = (digit, index) => {\n    const nextDigits = digits.slice(0);\n    nextDigits[index] = digit;\n    setDigits(nextDigits);\n  };\n\n  const validateDigits = () => {\n    if (hasDuplicates(digits)) {\n      return { valid: false, msg: 'Each digit should be unique.' };\n    }\n\n    if (digits.some(v => v === '')) {\n      return { valid: false, msg: '' };\n    }\n\n    return { valid: true, msg: '' };\n  };\n\n  const resetDigits = () => setDigits(initialState);\n\n  return [digits, setDigitAt, validateDigits(), resetDigits];\n}\n","import React from 'react';\n\nimport styles from './InputForm.module.css';\n\nimport DigitInput from './DigitInput';\nimport useDigits from '../hooks/useDigits';\n\nexport default function InputForm({ onSubmit }) {\n  const [digits, setDigitAt, validation, resetDigits] = useDigits();\n  const refs = React.useRef(digits.map(React.createRef)); // cf. https://stackoverflow.com/questions/54633690/\n\n  // autofocus the first digit input on initial render\n  React.useEffect(() => {\n    refs.current[0].current.focus();\n  }, []);\n\n  function handleSubmit(ev) {\n    ev.preventDefault();\n    onSubmit(digits.join(''));\n    resetDigits();\n    refs.current[0].current.focus();\n    refs.current[0].current.scrollIntoView();\n  }\n\n  function handleTransfertFocus(index, direction) {\n    const targetIndex = index + direction;\n    if (targetIndex >= 0 && targetIndex < digits.length) {\n      refs.current[targetIndex].current.focus();\n    }\n  }\n\n  return (\n    <form className={styles.form}>\n      <fieldset className={styles.fieldset}>\n        {digits.map((value, index) => (\n          <DigitInput\n            label={`digit number #${index + 1}`}\n            key={index}\n            ref={refs.current[index]}\n            value={value}\n            onChange={value => setDigitAt(value, index)}\n            onYieldFocus={direction => handleTransfertFocus(index, direction)}\n          />\n        ))}\n      </fieldset>\n      <button\n        type=\"submit\"\n        className={styles.button}\n        title=\"Validate\"\n        disabled={!validation.valid}\n        onClick={handleSubmit}\n      >\n        &#8679;\n      </button>\n      <p className={styles.error}>{validation.msg}&nbsp;</p>\n    </form>\n  );\n}\n","import React from 'react';\n\nimport styles from './SuccessPanel.module.css';\n\nexport default function SuccessPanel({ secretDigits, nbAttempts, onRestart }) {\n  const btnRef = React.useRef();\n\n  // autofocus the restart button on initial render\n  React.useEffect(() => {\n    btnRef.current.focus();\n  }, []);\n\n  return (\n    <article>\n      <div className={styles.commands}>\n        <button\n          ref={btnRef}\n          type=\"button\"\n          onClick={onRestart}\n          className={styles.button}\n          title=\"Restart\"\n        >\n          &#8634;\n        </button>\n      </div>\n      <h1>Well done!</h1>\n      <p>\n        You have found the secret digits:{' '}\n        <strong className={styles.digits}>{secretDigits}</strong><br />\n        within <strong>{nbAttempts}</strong> attempts\n      </p>\n    </article>\n  );\n}\n","import React from 'react';\n\nimport styles from './Boardgame.module.css';\n\nimport AttemptResult from './AttemptResult';\nimport InputForm from './InputForm';\nimport SuccessPanel from './SuccessPanel';\n\nimport useAttempts from '../hooks/useAttempts';\nimport useSecretDigits from '../hooks/useSecretDigits';\n\nexport default function Boardgame() {\n  const [secretDigits, computeNextSecretDigits] = useSecretDigits();\n  const [attempts, addAttempt, resetAttempts] = useAttempts();\n\n  // TODO only testing the last attempt should be sufficient\n  const found = attempts.indexOf(secretDigits) !== -1;\n\n  function handleRestart() {\n    computeNextSecretDigits();\n    resetAttempts();\n  }\n\n  let content;\n  if (found) {\n    content = (\n      <SuccessPanel\n        secretDigits={secretDigits}\n        nbAttempts={attempts.length}\n        onRestart={handleRestart}\n      />\n    );\n  } else {\n    content = (\n      <>\n        <table className={styles.attempts} hidden={!attempts.length}>\n          <thead>\n            <tr>\n              <th>&nbsp;</th>\n              <th>Attempts</th>\n              <th>Results</th>\n            </tr>\n          </thead>\n          <tbody>\n            {attempts.map((attempt, index) => (\n              <tr key={index}>\n                <td>#{index + 1}</td>\n                <td>{attempt}</td>\n                <td>\n                  <AttemptResult\n                    attempt={attempt}\n                    secretDigits={secretDigits}\n                  />\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n        <InputForm onSubmit={addAttempt} />\n      </>\n    );\n  }\n\n  return <section>{content}</section>;\n}\n","import { useState, useDebugValue } from 'react';\n\nexport default function useSecretDigits() {\n  let [secretDigits, setSecretDigits] = useState(null);\n\n  function computeNextSecretDigits() {\n    let nextSecretDigits = '';\n    while (nextSecretDigits.length < 4) {\n      const candidate = Math.floor(Math.random() * 10);\n      if (nextSecretDigits.indexOf(candidate) === -1) {\n        nextSecretDigits += '' + candidate;\n      }\n    }\n    setSecretDigits(nextSecretDigits);\n    return nextSecretDigits;\n  }\n\n  // initial secret digits\n  if (secretDigits === null) {\n    secretDigits = computeNextSecretDigits();\n  }\n\n  // reveal secret digits in React DevTools\n  useDebugValue(secretDigits);\n\n  return [secretDigits, computeNextSecretDigits];\n}\n","import { useState, useCallback } from 'react';\n\nexport default function useAttempts() {\n  const [attempts, setAttempts] = useState([]);\n\n  const addAttempt = useCallback(digits =>\n    setAttempts(attempts.concat([digits]))\n  );\n\n  const resetAttempts = useCallback(() => setAttempts([]));\n\n  return [attempts, addAttempt, resetAttempts];\n}\n","import React from 'react';\n\nimport styles from './App.module.css';\nimport github from './images/github.png';\n\nimport Introduction from './components/Introduction';\nimport Boardgame from './components/Boardgame';\n\nconst currentYear = new Date().getFullYear();\n\nexport default function App() {\n  return (\n    <main className={styles.app}>\n      <header>\n        <h1>\n          secret&middot;digits\n          <small>bulls and cows</small>\n        </h1>\n        <Introduction />\n      </header>\n      <Boardgame />\n      <footer>\n        Copyright &copy; {currentYear} wed\n        <a\n          href=\"https://github.com/wedk/secret-digits\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          title=\"View on GitHub\"\n        >\n          <img\n            src={github}\n            className={styles.github}\n            width=\"18\"\n            height=\"18\"\n            alt=\"GitHub logo\"\n          />\n        </a>\n      </footer>\n    </main>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\n\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('app'));\n"],"sourceRoot":""}